(function(t){function e(e){for(var a,r,s=e[0],c=e[1],l=e[2],u=0,f=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&f.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},o={app:0},i=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var d=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"07ec":function(t,e,n){"use strict";n("2151")},"0b79":function(t,e,n){},"1b4a":function(t,e,n){},2151:function(t,e,n){},"24be":function(t,e,n){"use strict";n("29de")},"25a3":function(t,e,n){},"26f3":function(t,e,n){"use strict";n("25a3")},2785:function(t,e,n){"use strict";n("d091")},"29de":function(t,e,n){},"2e6c":function(t,e,n){},"320f":function(t,e,n){"use strict";n("baa8")},3692:function(t,e,n){"use strict";n("6cb9")},"36f9":function(t,e,n){"use strict";n("cb79")},"3bac":function(t,e,n){},"45aa":function(t,e,n){"use strict";n("8048")},"4cac":function(t,e,n){"use strict";n("2e6c")},5033:function(t){t.exports=JSON.parse('[{"id":"1","shape":"node-start","x":290,"y":110,"data":{"label":"读数据","status":"success"},"ports":[{"id":"1-1","group":"bottom"}]},{"id":"2","shape":"node-xunhuan","x":290,"y":225,"data":{"label":"逻辑回归","status":"success"},"ports":[{"id":"2-1","group":"top"},{"id":"2-2","group":"bottom"},{"id":"2-3","group":"bottom"}]},{"id":"3","shape":"node-composerluojibianpai","x":170,"y":350,"data":{"label":"模型预测","status":"success"},"ports":[{"id":"3-1","group":"top"}]},{"id":"4","shape":"node-bianpaicanshu","x":450,"y":350,"data":{"label":"读取参数","status":"success"},"ports":[{"id":"4-1","group":"top"}]},{"id":"5","shape":"tjrf-edge","source":{"cell":"1","port":"1-1"},"target":{"cell":"2","port":"2-1"},"zIndex":0},{"id":"6","shape":"tjrf-edge","source":{"cell":"2","port":"2-2"},"target":{"cell":"3","port":"3-1"},"zIndex":0},{"id":"7","shape":"tjrf-edge","source":{"cell":"2","port":"2-3"},"target":{"cell":"4","port":"4-1"},"zIndex":0}]')},"56d7":function(t,e,n){"use strict";n.r(e);n("e623"),n("e379"),n("5dc8"),n("37e1");var a=n("a026"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100vw",height:"100vh",overflow:"hidden"},attrs:{id:"coverCot"}},[n("section",{staticClass:"section-cot",staticStyle:{width:"100%",height:"100%"}},[n("div",{attrs:{id:"container"},on:{click:function(e){return e.stopPropagation(),t.hideFn.apply(null,arguments)}}},[t.showContextMenu?n("MenuBar",{ref:"menuBar",on:{callBack:t.contextMenuFn}}):t._e(),n("el-tag",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticStyle:{width:"100%"},attrs:{type:"primary"}},[t._v("AntV x6 、ElementUI 、 Vue.js 搭建可视化拖拽流程图")]),n("header",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}]},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"项目",placement:"bottom"}},[n("i",{staticClass:"el-icon-menu",on:{click:function(e){return t.showDrawerFn()}}})]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"长按shift多选",placement:"bottom"}},[n("i",{staticClass:"el-icon-crop"})]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"放大",placement:"bottom"}},[n("i",{staticClass:"el-icon-zoom-in",on:{click:function(e){return t.zoomFn(.2)}}})]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"缩小",placement:"bottom"}},[n("i",{staticClass:"el-icon-zoom-out",on:{click:function(e){return t.zoomFn(-.2)}}})]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"适应屏幕",placement:"bottom"}},[n("i",{staticClass:"el-icon-full-screen",on:{click:t.centerFn}})]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"执行",placement:"bottom"}},[n("i",{staticClass:"el-icon-video-play",on:{click:function(e){return t.startFn()}}})]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"保存",placement:"bottom"}},[n("i",{staticClass:"el-icon-upload",on:{click:function(e){return t.saveFn()}}})]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"加载保存页面",placement:"bottom"}},[n("i",{staticClass:"el-icon-link",on:{click:function(e){return t.loadFn()}}})]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"是否禁用",placement:"bottom"}},[n("i",{class:{"el-icon-lock":t.isLock,"el-icon-unlock":!t.isLock},on:{click:function(e){return t.lockFn()}}})])],1),n("div",{attrs:{id:"draw-cot"}}),n("div",{attrs:{id:"minimap"}}),n("Drawer",{ref:"drawer",on:{addNode:t.addNode}}),n("rightDrawer",{ref:"rightDrawer",attrs:{title:t.rightDrawerTitle},on:{save:t.preserveStatus}})],1)])])},i=[],r=n("5530"),s=n("1da1"),c=(n("96cf"),n("d3b7"),n("159b"),n("b0c0"),n("5033")),l=n("a9e2"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{staticClass:"box-card",staticStyle:{padding:"0"},style:{left:t.x+"px",top:t.y+"px"},attrs:{stop:11},on:{click:function(t){t.stopPropagation()}}},[n("ul",{staticClass:"func-list"},[n("li",{staticClass:"func-item"},[n("el-button",{staticClass:"func-button",attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(e){return t.callBack("edit")}}},[t._v("编辑")])],1),n("li",{staticClass:"func-item"},[n("el-button",{staticClass:"func-button func-delete",attrs:{type:"text",size:"small",icon:"el-icon-delete"},on:{click:function(e){return t.callBack("remove")}}},[t._v("删除")])],1)])])},u=[],f=n("d4ec"),p=n("bee2"),m=(n("e9c4"),n("bf19"),function(){function t(e){Object(f["a"])(this,t),this.vm=e}return Object(p["a"])(t,[{key:"zoomFn",value:function(t){var e=this.vm;e.graph.zoom(t)}},{key:"centerFn",value:function(){var t=this.vm,e=t.graph.zoom();e>1?t.graph.zoom(-1*e):t.graph.zoom(e),t.graph.centerContent()}},{key:"startFn",value:function(t,e,n){var a=this.vm;a.timer&&clearTimeout(a.timer),a.init(t||e),a.showNodeStatus(Object.assign([],n)),a.graph.centerContent()}},{key:"startMock",value:function(t,e,n){var a=this.vm;a.timer&&clearTimeout(a.timer),a.init(t||e.cells),a.showNodeStatus(Object.assign([],n)),a.graph.centerContent()}},{key:"saveFn",value:function(){var t=this.vm;localStorage.setItem("x6JSON",JSON.stringify(t.graph.toJSON({diff:!0})))}},{key:"loadFn",value:function(){var t=this.vm;t.timer&&clearTimeout(t.timer);var e=JSON.parse(localStorage.getItem("x6JSON"));t.startFn(e.cells)}},{key:"lockFn",value:function(){var t=this.vm;t.isLock=!t.isLock,t.isLock?(t.graph.enablePanning(),t.graph.enableKeyboard()):(t.graph.disablePanning(),t.graph.disableKeyboard())}},{key:"showPorts",value:function(t){for(var e=document.getElementById("container"),n=e.querySelectorAll(".x6-port-body"),a=0,o=n.length;a<o;a++)n[a].style.visibility=t?"visible":"hidden"}}]),t}()),h=function(t,e){var n=t.removeNode(e);return n},g=m,b={name:"MenuBar",data:function(){return{x:"",y:"",item:{}}},methods:{deleteNode:h,initFn:function(t,e,n){var a=20;this.x=a+parseInt(t)+"",this.y=e+"",n&&(this.item=n)},setItem:function(t){this.item=t},callBack:function(t){this.$emit("callBack",t,this.item)}}},v=b,y=(n("97b4"),n("2877")),k=Object(y["a"])(v,d,u,!1,null,"25dd8d95",null),x=k.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Ec-x6-icon"},[a("el-drawer",{staticStyle:{position:"absolute",width:"300px","box-sizing":"border-box"},attrs:{visible:t.visible,direction:t.direction,size:"300px",modal:!1,"modal-append-to-body":!1},on:{"update:visible":function(e){t.visible=e}}},[a("template",{slot:"title"},[a("h2",{staticClass:"iconfont icon-jiedianleixing drawe-title"},[t._v("节点类型")])]),a("section",{staticClass:"node-filter"},[a("el-input",{attrs:{size:"small",placeholder:"请输入搜索的内容",maxlength:"20","show-word-limit":"",clearable:""},on:{input:t.filterNode},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("section",{staticClass:"listBar",on:{click:function(t){t.stopPropagation()}}},[a("p",{staticClass:"down-select",on:{click:function(e){t.showMore=!t.showMore}}},[a("img",{class:{arrow:t.showMore},attrs:{src:n("d4d9"),alt:""}}),t._v(" 基础组件 ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"listBar-cot"},[a("node-list",{on:{"drag-start":t.drag,"drag-end":t.dragend}})],1)])],2)],1)},C=[],w=(n("ac1f"),n("841c"),[{type:"primary",shape:"node-start",label:"基础节点01",name:"基础节点01",iconfont:"icon-Start-01",data:{name:"自定义数据名称01"}},{type:"primary",shape:"node-xunhuan",label:"基础节点02",name:"基础节点02",iconfont:"icon-xunhuan",data:{name:"自定义数据名称02"}},{type:"primary",shape:"node-lingxing",label:"基础节点03",name:"基础节点03",iconfont:"icon-lingxing1",data:{name:"自定义数据名称03"}},{type:"primary",shape:"node-circle",label:"基础节点04",name:"基础节点04",iconfont:"icon-circle",data:{name:"自定义数据名称04"}},{type:"primary",shape:"node-shujuku",label:"基础节点05",name:"基础节点05",iconfont:"icon-shujuku",data:{name:"自定义数据名称05"}},{type:"primary",shape:"node-juxing",label:"基础节点06",name:"基础节点06",iconfont:"icon-juxing",data:{name:"自定义数据名称06"}},{type:"primary",shape:"node-jieshu",label:"基础节点07",name:"基础节点07",iconfont:"icon-jieshu",data:{name:"自定义数据名称07"}},{type:"primary",shape:"node-wendang",label:"基础节点08",name:"基础节点08",iconfont:"icon-wendang",data:{name:"自定义数据名称08"}},{type:"primary",shape:"node-message",label:"基础节点09",name:"基础节点09",iconfont:"icon-message",data:{name:"自定义数据名称09"}},{type:"primary",shape:"node-composerluojibianpai",label:"基础节点10",name:"基础节点10",iconfont:"icon-composerluojibianpai",data:{name:"自定义数据名称10"}},{type:"primary",shape:"node-bianliangfuzhi",label:"基础节点11",name:"基础节点11",iconfont:"icon-bianliangfuzhi",data:{name:"自定义数据名称11"}},{type:"primary",shape:"node-switch",label:"基础节点12",name:"基础节点12",iconfont:"icon-switch",data:{name:"自定义数据名称12"}},{type:"primary",shape:"node-bianpaicanshu",label:"基础节点13",name:"基础节点13",iconfont:"icon-bianpaicanshu",data:{name:"自定义数据名称13"}}]),j=w,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"node-list"},t._l(t.config,(function(e,a){return n("li",{key:a,staticClass:"node-wrapper",attrs:{draggable:"true"},on:{drag:function(n){return t.drag(e)},dragend:function(n){return t.dragend(e)}}},[n("div",{staticClass:"node"},[n("span",{staticClass:"iconfont",class:[e.iconfont]})])])})),0)},N=[],$=(n("4de4"),n("caad6"),n("2532"),n("498a"),{data:function(){return{config:j}},mounted:function(){this.filterNode()},methods:{drag:function(t){this.$emit("drag-start",t)},dragend:function(t){this.$emit("drag-end",t)},filterNode:function(){var t=this;this.$bus.$on("filter-node",(function(e){var n=j.filter((function(t){var n=t.name.includes(e.trim())||t.label.includes(e.trim());return n}));t.config=n}))}}}),z=$,W=(n("d7e8"),Object(y["a"])(z,E,N,!1,null,"c7b58c32",null)),O=W.exports,F={x:null,y:null},S={name:"Drawer",components:{NodeList:O},data:function(){return{visible:!0,direction:"ltr",showMore:!0,configList:j,search:""}},mounted:function(){document.getElementById("container").addEventListener("dragover",(function(t){F.x=t.clientX,F.y=t.clientY}),!1)},methods:{filterNode:function(){this.$bus.$emit("filter-node",this.search)},drag:function(){var t=document.getElementById("container").getBoundingClientRect();F.x>t.left&&F.x<t.right&&F.y>t.top&&(F.y,t.bottom)},nodeConfig:function(t,e,n){var a="",o=t.type,i=t.shape,r=t.data;switch(o){case"primary":a={x:e,y:n,shape:i,data:r};break;default:a={x:e,y:n,shape:"node-circle",data:{}};break}return a},dragend:function(t){var e=document.getElementById("container").getBoundingClientRect(),n=!1;F.x>e.left&&F.x<e.right&&F.y>e.top&&F.y<e.bottom&&(n=!0),!0===n&&(console.log(t,"拖拽配置"),this.$emit("addNode",this.nodeConfig(t,F.x,F.y)))}}},I=S,D=(n("5d9f"),Object(y["a"])(I,_,C,!1,null,"ad27ed96",null)),B=D.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"right-drawer"},[n("el-drawer",{attrs:{visible:t.visible,direction:t.direction,modal:!1,size:300,"modal-append-to-body":!1},on:{"update:visible":function(e){t.visible=e}}},[n("template",{slot:"title"},[n("h3",[t._v(t._s(t.title))])]),n("el-form",{staticClass:"form",attrs:{model:t.form,size:"small"}},[n("el-form-item",{attrs:{prop:"label",label:"名称"}},[n("el-input",{model:{value:t.form.label,callback:function(e){t.$set(t.form,"label",e)},expression:"form.label"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.$emit("save",{node:t.node,form:t.form})}}},[t._v("保存")])],1)],1)],2)],1)},G=[],P={name:"rightDrawer",props:{title:{type:String,default:"标题"}},data:function(){return{visible:!1,direction:"rtl",form:{label:"名称"},node:{}}}},J=P,T=(n("fd74"),Object(y["a"])(J,M,G,!1,null,"7cdb9792",null)),L=T.exports,R=(n("99af"),n("5728"));function X(t,e){var n=t;return n.registerEdge(e,{inherit:"edge",attrs:{line:{stroke:"#606266",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},router:{name:"manhattan",args:{startDirections:["bottom"],endDirections:["top"]}}},!0),n}X(R["b"],"tjrf-edge");var A=n("ade3"),K=(n("3e2f"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"nodeCircle",staticClass:"node-circle"},[t._m(0)])}),V=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node"},[n("span",{staticClass:"iconfont icon-circle"})])}],Y={inject:["getGraph","getNode"],name:"node-circle",data:function(){return{label:"label",nodeWidth:0}}},U=Y,q=(n("3692"),Object(y["a"])(U,K,V,!1,null,"68e30de8",null)),H=q.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"nodeStart",staticClass:"node-start"},[t._m(0)])},Z=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node"},[n("span",{staticClass:"iconfont icon-Start-01"})])}],tt={inject:["getGraph","getNode"],name:"node-start",data:function(){return{label:"label",nodeWidth:0}}},et=tt,nt=(n("fab3"),Object(y["a"])(et,Q,Z,!1,null,"5c5c1dd0",null)),at=nt.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"nodeXunhuan",staticClass:"node-xunhuan"},[t._m(0)])},it=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node"},[n("span",{staticClass:"iconfont icon-xunhuan"})])}],rt={inject:["getGraph","getNode"],name:"node-xunhuan",data:function(){return{label:"label",nodeWidth:0}}},st=rt,ct=(n("a7cf"),Object(y["a"])(st,ot,it,!1,null,"cffe5890",null)),lt=ct.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"nodeLingxing",staticClass:"node-lingxing"},[t._m(0)])},ut=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node"},[n("span",{staticClass:"iconfont icon-lingxing1"})])}],ft={inject:["getGraph","getNode"],name:"node-lingxing",data:function(){return{label:"label",nodeWidth:0}}},pt=ft,mt=(n("ea16"),Object(y["a"])(pt,dt,ut,!1,null,"16eb0d6f",null)),ht=mt.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"nodeShujuku",staticClass:"node-shujuku"},[t._m(0)])},bt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node"},[n("span",{staticClass:"iconfont icon-shujuku"})])}],vt={inject:["getGraph","getNode"],name:"node-shujuku",data:function(){return{label:"label",nodeWidth:0}}},yt=vt,kt=(n("4cac"),Object(y["a"])(yt,gt,bt,!1,null,"60322dc0",null)),xt=kt.exports,_t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"nodeJuxing",staticClass:"node-juxing"},[t._m(0)])},Ct=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node"},[n("span",{staticClass:"iconfont icon-juxing"})])}],wt={inject:["getGraph","getNode"],name:"node-juxing",data:function(){return{label:"label",nodeWidth:0}}},jt=wt,Et=(n("45aa"),Object(y["a"])(jt,_t,Ct,!1,null,"3b2af59c",null)),Nt=Et.exports,$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"nodeJieshu",staticClass:"node-jieshu"},[t._m(0)])},zt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node"},[n("span",{staticClass:"iconfont icon-jieshu"})])}],Wt={inject:["getGraph","getNode"],name:"node-jieshu",data:function(){return{label:"label",nodeWidth:0}}},Ot=Wt,Ft=(n("e0d3"),Object(y["a"])(Ot,$t,zt,!1,null,"267e8d3c",null)),St=Ft.exports,It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"nodeWendang",staticClass:"node-wendang"},[t._m(0)])},Dt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node"},[n("span",{staticClass:"iconfont icon-wendang"})])}],Bt={inject:["getGraph","getNode"],name:"node-wendang",data:function(){return{label:"label",nodeWidth:0}}},Mt=Bt,Gt=(n("320f"),Object(y["a"])(Mt,It,Dt,!1,null,"6ebbcef8",null)),Pt=Gt.exports,Jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"nodeMessage",staticClass:"node-message"},[t._m(0)])},Tt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node"},[n("span",{staticClass:"iconfont icon-message"})])}],Lt={inject:["getGraph","getNode"],name:"node-message",data:function(){return{label:"label",nodeWidth:0}}},Rt=Lt,Xt=(n("6abb"),Object(y["a"])(Rt,Jt,Tt,!1,null,"1fd08628",null)),At=Xt.exports,Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"nodeComposerluojibianpai",staticClass:"node-composerluojibianpai"},[t._m(0)])},Vt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node"},[n("span",{staticClass:"iconfont icon-composerluojibianpai"})])}],Yt={inject:["getGraph","getNode"],name:"node-composerluojibianpai",data:function(){return{label:"label",nodeWidth:0}}},Ut=Yt,qt=(n("36f9"),Object(y["a"])(Ut,Kt,Vt,!1,null,"42f47346",null)),Ht=qt.exports,Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"nodeBianliangfuzhi",staticClass:"node-bianliangfuzhi"},[t._m(0)])},Zt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node"},[n("span",{staticClass:"iconfont icon-bianliangfuzhi"})])}],te={inject:["getGraph","getNode"],name:"node-bianliangfuzhi",data:function(){return{label:"label",nodeWidth:0}}},ee=te,ne=(n("07ec"),Object(y["a"])(ee,Qt,Zt,!1,null,"4e087f8e",null)),ae=ne.exports,oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"nodeSwitch",staticClass:"node-switch"},[t._m(0)])},ie=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node"},[n("span",{staticClass:"iconfont icon-switch"})])}],re={inject:["getGraph","getNode"],name:"node-switch",data:function(){return{label:"label",nodeWidth:0}}},se=re,ce=(n("24be"),Object(y["a"])(se,oe,ie,!1,null,"06a2ecb0",null)),le=ce.exports,de=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"nodeBianpaicanshu",staticClass:"node-bianpaicanshu"},[t._m(0)])},ue=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node"},[n("span",{staticClass:"iconfont icon-bianpaicanshu"})])}],fe={inject:["getGraph","getNode"],name:"node-bianpaicanshu",data:function(){return{label:"label",nodeWidth:0}}},pe=fe,me=(n("26f3"),Object(y["a"])(pe,de,ue,!1,null,"a0542688",null)),he=me.exports,ge=[{name:"nodeCircle",component:H},{name:"nodeStart",component:at},{name:"nodeXunhuan",component:lt},{name:"nodeLingxing",component:ht},{name:"nodeShujuku",component:xt},{name:"nodeJuxing",component:Nt},{name:"nodeJieshu",component:St},{name:"nodeWendang",component:Pt},{name:"nodeMessage",component:At},{name:"nodeComposerluojibianpai",component:Ht},{name:"nodeBianliangfuzhi",component:ae},{name:"nodeSwitch",component:le},{name:"nodeBianpaicanshu",component:he}];function be(t,e,n,a){var o=t,i=n.width,r=n.height;return o.registerNode(e,{inherit:"vue-shape",width:i,height:r,component:a,ports:{groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#c2c805",strokeWidth:1,fill:"#fff"}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#c2c805",strokeWidth:1,fill:"#fff"}}},left:{position:"left",attrs:{circle:{r:4,magnet:!0,stroke:"#c2c805",strokeWidth:1,fill:"#fff"}}},right:{position:"right",attrs:{circle:{r:4,magnet:!0,stroke:"#c2c805",strokeWidth:1,fill:"#fff"}}}}},attrs:{label:{text:"测试节点",fontSize:14,fill:"#333333",refX:"50%",refY:"128%",textAnchor:"middle",textVerticalAnchor:"middle"}}},!0),o}ge.forEach((function(t){be(R["b"],t.component.name,{width:50,height:50},{template:"<".concat(t.component.name,"/>"),components:Object(A["a"])({},"".concat(t.name),t.component)})}));n("00b4");var ve=new g,ye=function(t,e){t.on("edge:contextmenu",(function(t){var n=t.e,a=t.edge;e.showContextMenu=!0,e.$nextTick((function(){e.$refs.menuBar.initFn(n.offsetX,n.offsetY,{type:"edge",item:a})}))})),t.on("edge:connected",(function(n){var a=n.edge,o=t.getCellById(a.source.cell),i=t.getCellById(a.target.cell);if("output"==i.data.type)return t.removeEdge(a.id);if("onlyIn"==o.data.type)return t.remomveEdge(a.id);if(/in/.test(a.source.port))return t.removeEdge(a.id);if(/out/.test(a.target.port))return t.removeEdge(a.id);if("condition"==o.data.type){if(i.data.t===a.id||i.data.f===a.id)return t.removeEdge(a.id);e.$refs.dialogContition.visible=!0,e.$refs.dialogContition.init(o.data.edge)}a.attr({line:{strokeDasharray:""}})})),t.on("node:contextmenu",(function(n){var a=n.x,o=n.y,i=n.node;e.showContextMenu=!0,e.$nextTick((function(){e.$refs.menuBar.setItem({type:"node",item:i});var n=t.localToPage(a,o);e.$refs.menuBar.initFn(n.x,n.y,{type:"node",item:i})}))})),t.on("node:change:data",(function(e){var n=e.node,a=t.getIncomingEdges(n),o=n.getData(),i=o.status;a&&a.forEach((function(t){"running"===i?(t.attr("line/stroke","#ff0000"),t.attr("line/strokeDasharray",5),t.attr("line/style/animation","runnig-line 60s infinite linear")):(t.attr("line/stroke","#606266"),t.attr("line/strokeDasharray",""),t.attr("line/style/animation",""))}))})),t.on("node:mouseenter",(function(){ve.showPorts(!0)})),t.on("node:mouseleave",(function(){ve.showPorts(!1)}))},ke=function(t){var e=new R["b"]({grid:{size:10,visible:!0,type:"dot",args:{color:"#000",thickness:1}},background:{color:"#fff"},container:t,snapline:{enabled:!0,sharp:!1,tolerance:20},scroller:!0,minimap:{enabled:!0,container:document.getElementById("minimap"),width:200,height:160,padding:10,graphOptions:{async:!0,getCellView:function(t){t.isNode()},createCellView:function(t){if(t.isEdge())return null}}},autoResize:!0,panning:{enable:!0,eventTypes:["leftMouseDown","mouseWheel"]},allowPanning:function(){return!0},mouseWheel:{enable:!0,modifiers:["ctrl","meta"],factor:1.1,maxScale:1.5,minScale:.5},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#fff",storke:"#31D0C6",strokeWidth:4}}}},connecting:{snap:!0,allowBlank:!0,allowLoop:!1,highlight:!0,connectionPoint:"anchor",anchor:"center",validateMagnet:function(){return!0},createEdge:function(){return e.createEdge({shape:"tjrf-edge",attrs:{line:{strokeDasharray:"5 5",targetMarker:{name:"block",width:12,height:8}}},zIndex:-1})}},selecting:{enable:!0,multiple:!0,rubberEdge:!0,rubberNode:!0,modifiers:"shift",rubberband:!0},keyboard:!0,clipboard:!0,history:!0});return e},xe=ke,_e=[[{id:"1",status:"running"},{id:"2",status:"default"},{id:"3",status:"default"},{id:"4",status:"default"}],[{id:"1",status:"success"},{id:"2",status:"running"},{id:"3",status:"default"},{id:"4",status:"default"}],[{id:"1",status:"success"},{id:"2",status:"success"},{id:"3",status:"running"},{id:"4",status:"running"}],[{id:"1",status:"success"},{id:"2",status:"success"},{id:"3",status:"success"},{id:"4",status:"failed"}]],Ce={name:"App",components:{MenuBar:x,Drawer:B,rightDrawer:L},data:function(){return{container:null,graph:"",timer:"",isLock:!1,showContextMenu:!1,funcs:{},rightDrawerTitle:"自定义标题"}},mounted:function(){this.initGraph(),this.keyBindFn(),this.startMock()},methods:{preserveStatus:function(t){var e=t.node,n=t.form;e.item.attr("label/text",n.label)},getNodeById:function(t){return this.graph.getCellById(t)},hideFn:function(){this.showContextMenu=!1},initGraph:function(){var t=document.getElementById("draw-cot"),e=xe(t);this.container=t,this.graph=e,ye(e,this);var n=new g(this);this.funcs=n},showNodeStatus:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=t.shift(),a&&a.forEach((function(t){var n=t.id,a=t.status,o=e.graph.getCellById(n),i=o.getData();o.setData(Object(r["a"])(Object(r["a"])({},i),{},{status:a}))})),e.timer=setTimeout((function(){e.showNodeStatus(t)}),300);case 3:case"end":return n.stop()}}),n)})))()},init:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];console.log(e,"初始化数据");var n=[];e.forEach((function(e){"tjrf-edge"===e.shape?n.push(t.graph.createEdge(e)):(delete e.component,n.push(t.graph.createNode(e).attr({label:{text:e.data.label}})))})),this.graph.resetCells(n)},zoomFn:function(t){this.funcs.zoomFn(t)},centerFn:function(){this.funcs.centerFn()},startFn:function(t){this.funcs.startFn(t,c,_e),this.funcs.showPorts(!1)},startMock:function(t){this.funcs.startMock(t,l,[])},createMenuFn:function(){},keyBindFn:function(){var t=this;this.graph.bindKey(["meta+c","ctrl+c"],(function(){var e=t.graph.getSelectedCells();return e.length&&t.graph.copy(e),!1})),this.graph.bindKey(["meta+x","ctrl+x"],(function(){var e=t.graph.getSelectedCells();return e.length&&t.graph.cut(e),!1})),this.graph.bindKey(["meta+v","ctrl+v"],(function(){if(!t.graph.isClipboardEmpty()){var e=t.graph.paste({offset:32});t.graph.cleanSelection(),t.graph.select(e)}return!1})),this.graph.bindKey(["meta+z","ctrl+z"],(function(){return t.graph.history.canUndo()&&t.graph.history.undo(),!1}))},saveFn:function(){this.funcs.saveFn()},loadFn:function(){this.funcs.loadFn()},lockFn:function(){this.funcs.lockFn()},contextMenuFn:function(t,e){var n=e.type,a=e.item,o=this.$refs.rightDrawer;switch(t){case"remove":"edge"==n?this.graph.removeEdge(a.id):"node"==n&&this.graph.removeNode(a.id);break;case"edit":o.visible=!o.visible,o.node=e,o.form.label=e.item.data.name,"edge"==n?this.rightDrawerTitle="编辑边":"node"==n&&(this.rightDrawerTitle="编辑节点")}this.showContextMenu=!1},showDrawerFn:function(){this.$refs.drawer.visible=!this.$refs.drawer.visible},addNode:function(t){console.log(t.data);var e=this.$cloneDeep(t),n=t.data.name;e.width=50,e.height=50,e.attrs={label:{text:n}},e.ports=[{id:n+"-1",group:"top"},{id:n+"-2",group:"right"},{id:n+"-3",group:"bottom"},{id:n+"-4",group:"left"}];var a=this.graph.pageToLocal(e.x,e.y),o=this.graph.addNode(Object.assign({},e,a));console.log(o,"新增节点")}}},we=Ce,je=(n("2785"),Object(y["a"])(we,o,i,!1,null,"76760d3a",null)),Ee=je.exports,Ne=n("2ef0");a["default"].prototype.$cloneDeep=Ne["cloneDeep"];var $e=n("5c96"),ze=n.n($e);n("0fae"),n("a342"),n("fbb7");a["default"].use(ze.a),a["default"].prototype.$bus=new a["default"],a["default"].config.productionTip=!1,new a["default"]({render:function(t){return t(Ee)}}).$mount("#app")},"5d9f":function(t,e,n){"use strict";n("3bac")},"6abb":function(t,e,n){"use strict";n("1b4a")},"6cb9":function(t,e,n){},"6d2a":function(t,e,n){},8048:function(t,e,n){},"97b4":function(t,e,n){"use strict";n("fcbc")},9888:function(t,e,n){},a342:function(t,e,n){},a7cf:function(t,e,n){"use strict";n("e5e3")},a9e2:function(t){t.exports=JSON.parse('{"cells":[{"shape":"tjrf-edge","attrs":{"line":{"strokeDasharray":""}},"id":"d7d06a78-76e7-44cf-80b0-9f4faaab86cb","zIndex":-1,"source":{"cell":"88642b49-a142-4675-af86-bdf07a7759b8","port":"自定义数据名称01-3"},"target":{"cell":"2cd3539a-471f-465b-864c-6517190f9b64","port":"自定义数据名称06-1"}},{"shape":"tjrf-edge","attrs":{"line":{"strokeDasharray":""}},"id":"aa71f461-e644-49af-80bf-bb0d705ebc80","zIndex":-1,"source":{"cell":"2cd3539a-471f-465b-864c-6517190f9b64","port":"自定义数据名称06-3"},"target":{"cell":"3e32e3bc-6a73-4513-b596-ae225ca97af9","port":"自定义数据名称03-1"}},{"shape":"tjrf-edge","attrs":{"line":{"strokeDasharray":""}},"id":"70886b4a-2193-4af0-83b2-13fbea18e169","zIndex":-1,"source":{"cell":"3e32e3bc-6a73-4513-b596-ae225ca97af9","port":"自定义数据名称03-3"},"target":{"cell":"9fdaafa9-faa9-4f01-997d-46cfb4fe1643","port":"自定义数据名称07-1"}},{"shape":"tjrf-edge","attrs":{"line":{"strokeDasharray":""}},"id":"ca9c8ba0-f35e-4373-92bb-3af80783fa83","zIndex":-1,"source":{"cell":"3e32e3bc-6a73-4513-b596-ae225ca97af9","port":"自定义数据名称03-2"},"target":{"cell":"b35ce926-cd0e-47a1-a425-a3f26955357e","port":"自定义数据名称02-4"}},{"shape":"tjrf-edge","attrs":{"line":{"strokeDasharray":""}},"id":"abfef9cf-0331-4e8a-ba66-ba782bcffa6c","zIndex":-1,"source":{"cell":"b35ce926-cd0e-47a1-a425-a3f26955357e","port":"自定义数据名称02-1"},"target":{"cell":"8776a6d4-86ea-411e-866d-704d4c3988bc","port":"自定义数据名称04-3"}},{"shape":"tjrf-edge","attrs":{"line":{"strokeDasharray":""}},"id":"91c467e0-adb8-4b40-a956-b2efdb7a102d","zIndex":-1,"source":{"cell":"8776a6d4-86ea-411e-866d-704d4c3988bc","port":"自定义数据名称04-4"},"target":{"cell":"2cd3539a-471f-465b-864c-6517190f9b64","port":"自定义数据名称06-2"}},{"position":{"x":81,"y":-8},"attrs":{"label":{"text":"开始"}},"shape":"node-start","component":{"template":"<node-start/>","components":{"nodeStart":{"inject":{"getGraph":{"from":"getGraph"},"getNode":{"from":"getNode"}},"name":"node-start","staticRenderFns":[null],"_compiled":true,"_scopeId":"data-v-1d76fe2f","beforeCreate":[null],"beforeDestroy":[null],"__file":"src/components/custom-node/nodeStart.vue","_Ctor":{}}}},"ports":{"groups":{"top":{"position":"top","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"bottom":{"position":"bottom","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"left":{"position":"left","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"right":{"position":"right","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}}},"items":[{"id":"自定义数据名称01-1","group":"top"},{"id":"自定义数据名称01-2","group":"right"},{"id":"自定义数据名称01-3","group":"bottom"},{"id":"自定义数据名称01-4","group":"left"}]},"id":"88642b49-a142-4675-af86-bdf07a7759b8","data":{"name":"自定义数据名称01"},"zIndex":1},{"position":{"x":81,"y":144},"attrs":{"label":{"text":"任务1"}},"shape":"node-juxing","component":{"template":"<node-juxing/>","components":{"nodeJuxing":{"inject":{"getGraph":{"from":"getGraph"},"getNode":{"from":"getNode"}},"name":"node-juxing","staticRenderFns":[null],"_compiled":true,"_scopeId":"data-v-0100a2b8","beforeCreate":[null],"beforeDestroy":[null],"__file":"src/components/custom-node/nodeJuxing.vue","_Ctor":{}}}},"ports":{"groups":{"top":{"position":"top","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"bottom":{"position":"bottom","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"left":{"position":"left","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"right":{"position":"right","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}}},"items":[{"id":"自定义数据名称06-1","group":"top"},{"id":"自定义数据名称06-2","group":"right"},{"id":"自定义数据名称06-3","group":"bottom"},{"id":"自定义数据名称06-4","group":"left"}]},"id":"2cd3539a-471f-465b-864c-6517190f9b64","data":{"name":"自定义数据名称06"},"zIndex":2},{"position":{"x":81,"y":307},"attrs":{"label":{"text":"判断条件"}},"shape":"node-lingxing","component":{"template":"<node-lingxing/>","components":{"nodeLingxing":{"inject":{"getGraph":{"from":"getGraph"},"getNode":{"from":"getNode"}},"name":"node-lingxing","staticRenderFns":[null],"_compiled":true,"_scopeId":"data-v-09817ba3","beforeCreate":[null],"beforeDestroy":[null],"__file":"src/components/custom-node/nodeLingxing.vue","_Ctor":{}}}},"ports":{"groups":{"top":{"position":"top","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"bottom":{"position":"bottom","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"left":{"position":"left","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"right":{"position":"right","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}}},"items":[{"id":"自定义数据名称03-1","group":"top"},{"id":"自定义数据名称03-2","group":"right"},{"id":"自定义数据名称03-3","group":"bottom"},{"id":"自定义数据名称03-4","group":"left"}]},"id":"3e32e3bc-6a73-4513-b596-ae225ca97af9","data":{"name":"自定义数据名称03"},"zIndex":3},{"position":{"x":81,"y":475},"attrs":{"label":{"text":"结束"}},"shape":"node-jieshu","component":{"template":"<node-jieshu/>","components":{"nodeJieshu":{"inject":{"getGraph":{"from":"getGraph"},"getNode":{"from":"getNode"}},"name":"node-jieshu","staticRenderFns":[null],"_compiled":true,"_scopeId":"data-v-5f9b9ffd","beforeCreate":[null],"beforeDestroy":[null],"__file":"src/components/custom-node/nodeJieshu.vue","_Ctor":{}}}},"ports":{"groups":{"top":{"position":"top","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"bottom":{"position":"bottom","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"left":{"position":"left","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"right":{"position":"right","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}}},"items":[{"id":"自定义数据名称07-1","group":"top"},{"id":"自定义数据名称07-2","group":"right"},{"id":"自定义数据名称07-3","group":"bottom"},{"id":"自定义数据名称07-4","group":"left"}]},"id":"9fdaafa9-faa9-4f01-997d-46cfb4fe1643","data":{"name":"自定义数据名称07"},"zIndex":4},{"position":{"x":321,"y":307},"attrs":{"label":{"text":"循环"}},"shape":"node-xunhuan","component":{"template":"<node-xunhuan/>","components":{"nodeXunhuan":{"inject":{"getGraph":{"from":"getGraph"},"getNode":{"from":"getNode"}},"name":"node-xunhuan","staticRenderFns":[null],"_compiled":true,"_scopeId":"data-v-7c7bae98","beforeCreate":[null],"beforeDestroy":[null],"__file":"src/components/custom-node/nodeXunhuan.vue","_Ctor":{}}}},"ports":{"groups":{"top":{"position":"top","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"bottom":{"position":"bottom","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"left":{"position":"left","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"right":{"position":"right","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}}},"items":[{"id":"自定义数据名称02-1","group":"top"},{"id":"自定义数据名称02-2","group":"right"},{"id":"自定义数据名称02-3","group":"bottom"},{"id":"自定义数据名称02-4","group":"left"}]},"id":"b35ce926-cd0e-47a1-a425-a3f26955357e","data":{"name":"自定义数据名称02"},"zIndex":5},{"position":{"x":321,"y":144},"attrs":{"label":{"text":"任务处理"}},"shape":"node-circle","component":{"template":"<node-circle/>","components":{"nodeCircle":{"inject":{"getGraph":{"from":"getGraph"},"getNode":{"from":"getNode"}},"name":"node-circle","staticRenderFns":[null],"_compiled":true,"_scopeId":"data-v-a0d1f45a","beforeCreate":[null],"beforeDestroy":[null],"__file":"src/components/custom-node/nodeCircle.vue","_Ctor":{}}}},"ports":{"groups":{"top":{"position":"top","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"bottom":{"position":"bottom","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"left":{"position":"left","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}},"right":{"position":"right","attrs":{"circle":{"r":4,"magnet":true,"stroke":"#c2c805","strokeWidth":1,"fill":"#fff"}}}},"items":[{"id":"自定义数据名称04-1","group":"top"},{"id":"自定义数据名称04-2","group":"right"},{"id":"自定义数据名称04-3","group":"bottom"},{"id":"自定义数据名称04-4","group":"left"}]},"id":"8776a6d4-86ea-411e-866d-704d4c3988bc","data":{"name":"自定义数据名称04"},"zIndex":6}]}')},baa8:function(t,e,n){},bc11:function(t,e,n){},cb79:function(t,e,n){},d091:function(t,e,n){},d4d9:function(t,e,n){t.exports=n.p+"assets/img/arrow.c5f24c13.svg"},d7e8:function(t,e,n){"use strict";n("bc11")},e0d3:function(t,e,n){"use strict";n("6d2a")},e1b4:function(t,e,n){},e5e3:function(t,e,n){},ea16:function(t,e,n){"use strict";n("e1b4")},fab3:function(t,e,n){"use strict";n("0b79")},fbb7:function(t,e,n){},fcbc:function(t,e,n){},fd74:function(t,e,n){"use strict";n("9888")}});